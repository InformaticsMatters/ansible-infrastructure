---

# General timeout,
# typically used within the k8s module for wait durations.
# One of the most time-consuming containers to start is Keycloak,
# which may take 7 minutes or so to become ready.
wait_timeout: 600
# Wait for volume binding?
# Probably unless multi-zone deployments
# where the PVC will not bind until the 'consumer' pod appears.
wait_for_bind: no
# Volume binding timeout (seconds)
bind_timeout: 60

# The valid ingress certificate issuer values
cert_issuer_set:
- staging
- production

# Postgres --------------------------------------------------------------------

# The infrastructure database version.
# For AWX the minimum version is 9.6+
pg_image: postgres
pg_version: '12.2'
# The image registry for the PostgreSQL container image
pg_image_registry: docker.io

# Postgres superuser details
pg_user: postgres
pg_user_password: "{{ lookup('password', '/dev/null length=12 chars=ascii_letters,digits') }}"
pg_database: postgres

# CPU and Memory requests and limits
pg_cpu_request: 100m
pg_cpu_limit: 1000m
pg_mem_request: 1Gi
pg_mem_limit: 2Gi

# Backup ----------------------------------------------------------------------

# Backups run as a CronJob.
# Set the schedule (and the number of hourly backups to keep) here.
pg_bu_hourly_schedule: '7 3 * * *'
pg_bu_hourly_history: 24
# The backup container image tag.
pg_bu_image_tag: 'stable'
# The registry
pg_bu_image_registry: docker.io

# Daily and weekly schedules
# (only of use if the corresponding history is set)
pg_bu_daily_schedule: '7 2 * * *'
pg_bu_weekly_schedule: '7 1 * * 0'
# ...and daily history (0 implies no backup)
pg_bu_daily_history: 0
# ...and weekly history (0 implies no backup)
# If you use weekly you must also use daily.
pg_bu_weekly_history: 0

# AWX -------------------------------------------------------------------------

# The AWX server version.
# A tag for the AWX github repo (See https://github.com/ansible/awx).
#
# NOTE: You MUST ensure that a play exists to render the AWX playbook that
#       will be downloaded for the version you define here. The play is should
#       be located in 'infrastructure/tasks'  and MUST be called
#       'render-awx-{{ ax_version }}-{{ ax_platform }}.yaml'
ax_version: '15.0.0'

# The directory (on the client) where the AWX repo
# (including the built-in installation playbook)
# will be cloned. AWX will be adjusted and installed from here.
ax_clone_dir: /tmp

# The AWX platform.
# Typically 'kubernetes' or 'openshift' where supported.
# A deploy-{{ ax-platform }}-awx-{{ ax_version }}.yaml file must exist
ax_platform: kubernetes
# The AWX CPU requests and limits.
ax_redis_cpu_request: 100
ax_redis_cpu_limit: 250
ax_task_cpu_request: 500
ax_task_cpu_limit: 1500
ax_web_cpu_request: 100
ax_web_cpu_limit: 250

# AWX database credentials.
# This is _not_ the AWX console admin user.
ax_user: awx
ax_user_password: "{{ lookup('password', '/dev/null length=10 chars=ascii_letters,digits') }}"
ax_database: awx

# Keycloak --------------------------------------------------------------------

# The Keycloak container version and image registry
kc_version: '10.0.2'
kc_image_registry: docker.io

# Keycloak database credentials.
# This is _not_ the keycloak console admin user.
kc_user: keycloak
kc_user_password: "{{ lookup('password', '/dev/null length=10 chars=ascii_letters') }}"
kc_database: keycloak

# CPU and Memory requests and limits
kc_cpu_request: 250m
kc_cpu_limit: 2
kc_mem_request: 1Gi
kc_mem_limit: 1Gi
