---

# Binds the 'open' PSP
# to the StatefulSet (controllerplugin) service account.

kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: csi-cinder-controllerplugin-psp
  namespace: "{{ cinder_namespace }}"
roleRef:
  kind: Role
  name: csi-cinder-psp
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: ServiceAccount
  name: csi-cinder-controller-sa
  namespace: "{{ cinder_namespace }}"

---

# Binds the 'open' PSP
# to the DaemonSet (nodeplugin) service account.

kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: csi-cinder-nodeplugin-psp
  namespace: "{{ cinder_namespace }}"
roleRef:
  kind: Role
  name: csi-cinder-psp
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: ServiceAccount
  name: csi-cinder-node-sa
  namespace: "{{ cinder_namespace }}"
